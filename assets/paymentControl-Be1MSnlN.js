var X={exports:{}},Ee;function Ye(){return Ee||(Ee=1,(function(l){var o=(function(n){var c=Object.prototype,a=c.hasOwnProperty,i=Object.defineProperty||function(r,e,t){r[e]=t.value},d,p=typeof Symbol=="function"?Symbol:{},m=p.iterator||"@@iterator",$=p.asyncIterator||"@@asyncIterator",A=p.toStringTag||"@@toStringTag";function O(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{O({},"")}catch{O=function(e,t,u){return e[t]=u}}function D(r,e,t,u){var s=e&&e.prototype instanceof y?e:y,v=Object.create(s.prototype),R=new K(u||[]);return i(v,"_invoke",{value:Z(r,t,R)}),v}n.wrap=D;function G(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(u){return{type:"throw",arg:u}}}var F="suspendedStart",w="suspendedYield",L="executing",W="completed",E={};function y(){}function b(){}function _(){}var B={};O(B,m,function(){return this});var j=Object.getPrototypeOf,U=j&&j(j(J([])));U&&U!==c&&a.call(U,m)&&(B=U);var P=_.prototype=y.prototype=Object.create(B);b.prototype=_,i(P,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:b,configurable:!0}),b.displayName=O(_,A,"GeneratorFunction");function H(r){["next","throw","return"].forEach(function(e){O(r,e,function(t){return this._invoke(e,t)})})}n.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===b||(e.displayName||e.name)==="GeneratorFunction":!1},n.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,_):(r.__proto__=_,O(r,A,"GeneratorFunction")),r.prototype=Object.create(P),r},n.awrap=function(r){return{__await:r}};function z(r,e){function t(v,R,S,T){var k=G(r[v],r,R);if(k.type==="throw")T(k.arg);else{var f=k.arg,h=f.value;return h&&typeof h=="object"&&a.call(h,"__await")?e.resolve(h.__await).then(function(g){t("next",g,S,T)},function(g){t("throw",g,S,T)}):e.resolve(h).then(function(g){f.value=g,S(f)},function(g){return t("throw",g,S,T)})}}var u;function s(v,R){function S(){return new e(function(T,k){t(v,R,T,k)})}return u=u?u.then(S,S):S()}i(this,"_invoke",{value:s})}H(z.prototype),O(z.prototype,$,function(){return this}),n.AsyncIterator=z,n.async=function(r,e,t,u,s){s===void 0&&(s=Promise);var v=new z(D(r,e,t,u),s);return n.isGeneratorFunction(e)?v:v.next().then(function(R){return R.done?R.value:v.next()})};function Z(r,e,t){var u=F;return function(v,R){if(u===L)throw new Error("Generator is already running");if(u===W){if(v==="throw")throw R;return V()}for(t.method=v,t.arg=R;;){var S=t.delegate;if(S){var T=q(S,t);if(T){if(T===E)continue;return T}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(u===F)throw u=W,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);u=L;var k=G(r,e,t);if(k.type==="normal"){if(u=t.done?W:w,k.arg===E)continue;return{value:k.arg,done:t.done}}else k.type==="throw"&&(u=W,t.method="throw",t.arg=k.arg)}}}function q(r,e){var t=e.method,u=r.iterator[t];if(u===d)return e.delegate=null,t==="throw"&&r.iterator.return&&(e.method="return",e.arg=d,q(r,e),e.method==="throw")||t!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),E;var s=G(u,r.iterator,e.arg);if(s.type==="throw")return e.method="throw",e.arg=s.arg,e.delegate=null,E;var v=s.arg;if(!v)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,E;if(v.done)e[r.resultName]=v.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=d);else return v;return e.delegate=null,E}H(P),O(P,A,"Generator"),O(P,m,function(){return this}),O(P,"toString",function(){return"[object Generator]"});function I(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function Y(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function K(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(I,this),this.reset(!0)}n.keys=function(r){var e=Object(r),t=[];for(var u in e)t.push(u);return t.reverse(),function s(){for(;t.length;){var v=t.pop();if(v in e)return s.value=v,s.done=!1,s}return s.done=!0,s}};function J(r){if(r){var e=r[m];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var t=-1,u=function s(){for(;++t<r.length;)if(a.call(r,t))return s.value=r[t],s.done=!1,s;return s.value=d,s.done=!0,s};return u.next=u}}return{next:V}}n.values=J;function V(){return{value:d,done:!0}}return K.prototype={constructor:K,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(Y),!r)for(var e in this)e.charAt(0)==="t"&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(T,k){return v.type="throw",v.arg=r,e.next=T,k&&(e.method="next",e.arg=d),!!k}for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u],v=s.completion;if(s.tryLoc==="root")return t("end");if(s.tryLoc<=this.prev){var R=a.call(s,"catchLoc"),S=a.call(s,"finallyLoc");if(R&&S){if(this.prev<s.catchLoc)return t(s.catchLoc,!0);if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else if(R){if(this.prev<s.catchLoc)return t(s.catchLoc,!0)}else if(S){if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var u=this.tryEntries[t];if(u.tryLoc<=this.prev&&a.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var s=u;break}}s&&(r==="break"||r==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var v=s?s.completion:{};return v.type=r,v.arg=e,s?(this.method="next",this.next=s.finallyLoc,E):this.complete(v)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),E},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),Y(t),E}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var u=t.completion;if(u.type==="throw"){var s=u.arg;Y(t)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:J(r),resultName:e,nextLoc:t},this.method==="next"&&(this.arg=d),E}},n})(l.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}})(X)),X.exports}var ee,Re;function ye(){return Re||(Re=1,ee=(l,o)=>`${l}-${o}-${Math.random().toString(16).slice(3,8)}`),ee}var re,Se;function je(){if(Se)return re;Se=1;const l=ye();let o=0;return re=({id:n,action:c,payload:a={}})=>{let i=n;return typeof i>"u"&&(i=l("Job",o),o+=1),{id:i,action:c,payload:a}},re}var x={},ke;function Le(){if(ke)return x;ke=1;let l=!1;return x.logging=l,x.setLogging=o=>{l=o},x.log=(...o)=>l?console.log.apply(this,o):null,x}var te,Oe;function Ke(){if(Oe)return te;Oe=1;const l=je(),{log:o}=Le(),n=ye();let c=0;return te=()=>{const a=n("Scheduler",c),i={},d={};let p=[];c+=1;const m=()=>p.length,$=()=>Object.keys(i).length,A=()=>{if(p.length!==0){const w=Object.keys(i);for(let L=0;L<w.length;L+=1)if(typeof d[w[L]]>"u"){p[0](i[w[L]]);break}}},O=(w,L)=>new Promise((W,E)=>{const y=l({action:w,payload:L});p.push(async b=>{p.shift(),d[b.id]=y;try{W(await b[w].apply(this,[...L,y.id]))}catch(_){E(_)}finally{delete d[b.id],A()}}),o(`[${a}]: Add ${y.id} to JobQueue`),o(`[${a}]: JobQueue length=${p.length}`),A()});return{addWorker:w=>(i[w.id]=w,o(`[${a}]: Add ${w.id}`),o(`[${a}]: Number of workers=${$()}`),A(),w.id),addJob:async(w,...L)=>{if($()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return O(w,L)},terminate:async()=>{Object.keys(i).forEach(async w=>{await i[w].terminate()}),p=[]},getQueueLen:m,getNumWorkers:$}},te}function Je(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oe,be;function xe(){return be||(be=1,oe=l=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof Je=="function"&&(o.type="node"),typeof l>"u"?o:o[l]}),oe}var ne,Te;function Ve(){if(Te)return ne;Te=1;const o=xe()("type")==="browser"?n=>new URL(n,window.location.href).href:n=>n;return ne=n=>{const c={...n};return["corePath","workerPath","langPath"].forEach(a=>{n[a]&&(c[a]=o(c[a]))}),c},ne}var ae,Ae;function ze(){return Ae||(Ae=1,ae={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ae}const Ze="6.0.1",Qe={version:Ze};var ie,_e;function Xe(){return _e||(_e=1,ie={workerBlobURL:!0,logger:()=>{}}),ie}var se,Ie;function er(){if(Ie)return se;Ie=1;const l=Qe.version;return se={...Xe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${l}/dist/worker.min.js`},se}var ce,Me;function rr(){return Me||(Me=1,ce=({workerPath:l,workerBlobURL:o})=>{let n;if(Blob&&URL&&o){const c=new Blob([`importScripts("${l}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(c))}else n=new Worker(l);return n}),ce}var ue,Ne;function tr(){return Ne||(Ne=1,ue=l=>{l.terminate()}),ue}var le,Pe;function or(){return Pe||(Pe=1,le=(l,o)=>{l.onmessage=({data:n})=>{o(n)}}),le}var de,qe;function nr(){return qe||(qe=1,de=async(l,o)=>{l.postMessage(o)}),de}var fe,Ce;function ar(){if(Ce)return fe;Ce=1;const l=n=>new Promise((c,a)=>{const i=new FileReader;i.onload=()=>{c(i.result)},i.onerror=({target:{error:{code:d}}})=>{a(Error(`File could not be read! Code=${d}`))},i.readAsArrayBuffer(n)}),o=async n=>{let c=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?c=atob(n.split(",")[1]).split("").map(a=>a.charCodeAt(0)):c=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(c=await o(n.src)),n.tagName==="VIDEO"&&(c=await o(n.poster)),n.tagName==="CANVAS"&&await new Promise(a=>{n.toBlob(async i=>{c=await l(i),a()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const a=await n.convertToBlob();c=await l(a)}else(n instanceof File||n instanceof Blob)&&(c=await l(n));return new Uint8Array(c)};return fe=o,fe}var he,$e;function ir(){if($e)return he;$e=1;const l=er(),o=rr(),n=tr(),c=or(),a=nr(),i=ar();return he={defaultOptions:l,spawnWorker:o,terminateWorker:n,onMessage:c,send:a,loadImage:i},he}var pe,De;function Fe(){if(De)return pe;De=1;const l=Ve(),o=je(),{log:n}=Le(),c=ye(),a=ze(),{defaultOptions:i,spawnWorker:d,terminateWorker:p,onMessage:m,loadImage:$,send:A}=ir();let O=0;return pe=async(D="eng",G=a.LSTM_ONLY,F={},w={})=>{const L=c("Worker",O),{logger:W,errorHandler:E,...y}=l({...i,...F}),b={},_=typeof D=="string"?D.split("+"):D;let B=G,j=w;const U=[a.DEFAULT,a.LSTM_ONLY].includes(G)&&!y.legacyCore;let P,H;const z=new Promise((f,h)=>{H=f,P=h}),Z=f=>{P(f.message)};let q=d(y);q.onerror=Z,O+=1;const I=({id:f,action:h,payload:g})=>new Promise((M,N)=>{n(`[${L}]: Start ${f}, action=${h}`);const C=`${h}-${f}`;b[C]={resolve:M,reject:N},A(q,{workerId:L,jobId:f,action:h,payload:g})}),Y=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),K=f=>I(o({id:f,action:"load",payload:{options:{lstmOnly:U,corePath:y.corePath,logging:y.logging}}})),J=(f,h,g)=>I(o({id:g,action:"FS",payload:{method:"writeFile",args:[f,h]}})),V=(f,h)=>I(o({id:h,action:"FS",payload:{method:"readFile",args:[f,{encoding:"utf8"}]}})),r=(f,h)=>I(o({id:h,action:"FS",payload:{method:"unlink",args:[f]}})),e=(f,h,g)=>I(o({id:g,action:"FS",payload:{method:f,args:h}})),t=(f,h)=>I(o({id:h,action:"loadLanguage",payload:{langs:f,options:{langPath:y.langPath,dataPath:y.dataPath,cachePath:y.cachePath,cacheMethod:y.cacheMethod,gzip:y.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(B)&&!y.legacyLang}}})),u=(f,h,g,M)=>I(o({id:M,action:"initialize",payload:{langs:f,oem:h,config:g}})),s=(f="eng",h,g,M)=>{if(U&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(h))throw Error("Legacy model requested but code missing.");const N=h||B;B=N;const C=g||j;j=C;const Q=(typeof f=="string"?f.split("+"):f).filter(He=>!_.includes(He));return _.push(...Q),Q.length>0?t(Q,M).then(()=>u(f,N,C,M)):u(f,N,C,M)},v=(f={},h)=>I(o({id:h,action:"setParameters",payload:{params:f}})),R=async(f,h={},g={text:!0},M)=>I(o({id:M,action:"recognize",payload:{image:await $(f),options:h,output:g}})),S=async(f,h)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return I(o({id:h,action:"detect",payload:{image:await $(f)}}))},T=async()=>(q!==null&&(p(q),q=null),Promise.resolve());m(q,({workerId:f,jobId:h,status:g,action:M,data:N})=>{const C=`${M}-${h}`;if(g==="resolve")n(`[${f}]: Complete ${h}`),b[C].resolve({jobId:h,data:N}),delete b[C];else if(g==="reject")if(b[C].reject(N),delete b[C],M==="load"&&P(N),E)E(N);else throw Error(N);else g==="progress"&&W({...N,userJobId:h})});const k={id:L,worker:q,load:Y,writeText:J,readText:V,removeFile:r,FS:e,reinitialize:s,setParameters:v,recognize:R,detect:S,terminate:T};return K().then(()=>t(D)).then(()=>u(D,G,w)).then(()=>H(k)).catch(()=>{}),z},pe}var me,Ge;function sr(){if(Ge)return me;Ge=1;const l=Fe();return me={recognize:async(c,a,i)=>{const d=await l(a,1,i);return d.recognize(c).finally(async()=>{await d.terminate()})},detect:async(c,a)=>{const i=await l("osd",0,a);return i.detect(c).finally(async()=>{await i.terminate()})}},me}var ve,We;function cr(){return We||(We=1,ve={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ve}var ge,Ue;function ur(){return Ue||(Ue=1,ge={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),ge}var we,Be;function lr(){if(Be)return we;Be=1,Ye();const l=Ke(),o=Fe(),n=sr(),c=cr(),a=ze(),i=ur(),{setLogging:d}=Le();return we={languages:c,OEM:a,PSM:i,createScheduler:l,createWorker:o,setLogging:d,...n},we}var dr=lr();class fr{constructor(){this.worker=null,this.nomeBeneficiario="Gustavo Santos Ribeiro",this.chavePix="12996764694",this.valorMinimo=10,this.toleranciaMinutos=5}async inicializarWorker(){return this.worker||(this.worker=await dr.createWorker("por"),await this.worker.setParameters({tessedit_char_whitelist:"0123456789R$:.,/abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ√°√©√≠√≥√∫√¢√™√Æ√¥√ª√£√µ√ß√Å√â√ç√ì√ö√Ç√ä√é√î√õ√É√ï√á -",preserve_interword_spaces:"1",tessedit_pageseg_mode:"6"})),this.worker}async processarArquivo(o){try{console.log("üîç Iniciando processamento do arquivo:",o.name);const n=await this.inicializarWorker(),c=await this.preProcessarImagem(o),{data:{text:a}}=await n.recognize(c);console.log("üìù Texto extra√≠do pelo OCR:",a);const i=this.analisarTexto(a),d=this.validarTemporalmente(i.dataHora);return i.valido&&d.valido?{valido:!0,mensagem:"‚úÖ Pagamento validado com sucesso!",dados:i,tempoRestante:d.tempoRestante}:d.valido?{valido:!1,mensagem:"‚ùå Dados incompletos no comprovante.",dados:i}:{valido:!1,mensagem:`‚ùå Comprovante expirado. ${d.mensagem}`,dados:i}}catch(n){return console.error("‚ùå Erro no processamento:",n),{valido:!1,mensagem:"‚ùå Erro ao processar imagem. Tente uma foto mais n√≠tida.",dados:null}}}async preProcessarImagem(o){return new Promise(n=>{const c=new Image,a=document.createElement("canvas"),i=a.getContext("2d");c.onload=()=>{a.width=c.width,a.height=c.height,i.drawImage(c,0,0);const d=i.getImageData(0,0,a.width,a.height),p=d.data;for(let m=0;m<p.length;m+=4){p[m]=this.clamp((p[m]-128)*1.3+128),p[m+1]=this.clamp((p[m+1]-128)*1.3+128),p[m+2]=this.clamp((p[m+2]-128)*1.3+128);const A=10;p[m]=this.clamp(p[m]+A),p[m+1]=this.clamp(p[m+1]+A),p[m+2]=this.clamp(p[m+2]+A)}i.putImageData(d,0,0),a.toBlob(m=>{n(m)},o.type)},c.src=URL.createObjectURL(o)})}clamp(o){return Math.min(255,Math.max(0,o))}analisarTexto(o){const n=o.toLowerCase();console.log("üìä Analisando texto...");const c={valor:[/r\$\s*(\d+[.,]\d{2})/gi,/(\d+[.,]\d{2})\s*reais/gi,/valor.*?(\d+[.,]\d{2})/gi,/total.*?(\d+[.,]\d{2})/gi,/(\d+[.,]\d{2})/g],dataHora:[/(\d{2}[./-]\d{2}[./-]\d{4}\s+\d{2}[:.]\d{2}(?:[:.]\d{2})?)/g,/(\d{2}[:.]\d{2}(?:[:.]\d{2})?\s+\d{2}[./-]\d{2}[./-]\d{4})/g,/(\d{4}[./-]\d{2}[./-]\d{2}\s+\d{2}[:.]\d{2})/g,/(\d{2}[./-]\d{2}[./-]\d{4})/g,/(\d{2}[:.]\d{2})/g,/(\d{1,2}[h]\s*\d{1,2})/gi],confirmacao:[/pix\s+(?:realizado|enviado|conclu√≠do|efetuado|feito)/gi,/transfer√™ncia\s+(?:realizada|conclu√≠da|efetuada)/gi,/pagamento\s+(?:realizado|conclu√≠do|efetuado|feito)/gi,/(?:confirma√ß√£o|comprovante)\s+de\s+(?:pagamento|pix)/gi,/(?:sucesso|confirmado|aprovado|conclu√≠do)/gi]},a={valor:null,dataHora:null,confirmacao:!1,textoEncontrado:[]};for(const i of c.valor){const d=[...n.matchAll(i)];for(const p of d){let m=parseFloat(p[1].replace(",","."));if(!isNaN(m)&&m>=this.valorMinimo){a.valor=m,a.textoEncontrado.push(`Valor: R$ ${m.toFixed(2)}`);break}}if(a.valor)break}for(const i of c.dataHora){const d=n.match(i);if(d){a.dataHora=this.normalizarDataHora(d[0]),a.textoEncontrado.push(`Data/Hora: ${a.dataHora}`);break}}for(const i of c.confirmacao)if(i.test(n)){a.confirmacao=!0,a.textoEncontrado.push("Confirma√ß√£o encontrada");break}return a.valido=this.validarResultado(a),console.log("üìã Resultado da an√°lise:",a),a}normalizarDataHora(o){const n=/(\d{2})[./-](\d{2})[./-](\d{4})\s+(\d{2})[:.](\d{2})/,c=/(\d{4})[./-](\d{2})[./-](\d{2})\s+(\d{2})[:.](\d{2})/,a=/(\d{2})[./-](\d{2})[./-](\d{4})/;let i;return(i=o.match(n))?`${i[3]}-${i[2]}-${i[1]}T${i[4]}:${i[5]}:00`:(i=o.match(c))?`${i[1]}-${i[2]}-${i[3]}T${i[4]}:${i[5]}:00`:(i=o.match(a))?`${i[3]}-${i[2]}-${i[1]}T00:00:00`:o}validarResultado(o){return o.valor!==null&&o.confirmacao&&o.dataHora!==null}validarTemporalmente(o){if(!o)return{valido:!1,mensagem:"Data/hora n√£o encontrada no comprovante."};try{const n=new Date(o),c=new Date;if(isNaN(n.getTime()))return{valido:!1,mensagem:"Data/hora inv√°lida no comprovante."};const a=c-n,i=Math.floor(a/(1e3*60));if(console.log(`‚è∞ Diferen√ßa temporal: ${i} minutos (m√°ximo: ${this.toleranciaMinutos} min)`),i>this.toleranciaMinutos){const p=i-this.toleranciaMinutos;return{valido:!1,mensagem:`Comprovante expirado h√° ${p} minutos. Fa√ßa um novo pagamento.`,tempoExcedido:p}}const d=this.toleranciaMinutos-i;return{valido:!0,mensagem:`Comprovante dentro do prazo (${d} minutos restantes).`,tempoRestante:d}}catch(n){return console.error("Erro na valida√ß√£o temporal:",n),{valido:!1,mensagem:"Erro ao validar data/hora."}}}async terminar(){this.worker&&(await this.worker.terminate(),this.worker=null)}}const pr=new fr;export{pr as default};
