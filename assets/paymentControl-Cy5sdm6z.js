var Q={exports:{}},Se;function He(){return Se||(Se=1,(function(u){var n=(function(o){var i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(r,e,t){r[e]=t.value},g,R=typeof Symbol=="function"?Symbol:{},y=R.iterator||"@@iterator",d=R.asyncIterator||"@@asyncIterator",v=R.toStringTag||"@@toStringTag";function p(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{p({},"")}catch{p=function(e,t,c){return e[t]=c}}function E(r,e,t,c){var s=e&&e.prototype instanceof L?e:L,m=Object.create(s.prototype),b=new V(c||[]);return l(m,"_invoke",{value:Z(r,t,b)}),m}o.wrap=E;function G(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(c){return{type:"throw",arg:c}}}var x="suspendedStart",S="suspendedYield",O="executing",W="completed",k={};function L(){}function _(){}function I(){}var j={};p(j,y,function(){return this});var B=Object.getPrototypeOf,U=B&&B(B(Y([])));U&&U!==i&&a.call(U,y)&&(j=U);var C=I.prototype=L.prototype=Object.create(j);_.prototype=I,l(C,"constructor",{value:I,configurable:!0}),l(I,"constructor",{value:_,configurable:!0}),_.displayName=p(I,v,"GeneratorFunction");function z(r){["next","throw","return"].forEach(function(e){p(r,e,function(t){return this._invoke(e,t)})})}o.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===_||(e.displayName||e.name)==="GeneratorFunction":!1},o.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,I):(r.__proto__=I,p(r,v,"GeneratorFunction")),r.prototype=Object.create(C),r},o.awrap=function(r){return{__await:r}};function F(r,e){function t(m,b,T,N){var A=G(r[m],r,b);if(A.type==="throw")N(A.arg);else{var f=A.arg,h=f.value;return h&&typeof h=="object"&&a.call(h,"__await")?e.resolve(h.__await).then(function(w){t("next",w,T,N)},function(w){t("throw",w,T,N)}):e.resolve(h).then(function(w){f.value=w,T(f)},function(w){return t("throw",w,T,N)})}}var c;function s(m,b){function T(){return new e(function(N,A){t(m,b,N,A)})}return c=c?c.then(T,T):T()}l(this,"_invoke",{value:s})}z(F.prototype),p(F.prototype,d,function(){return this}),o.AsyncIterator=F,o.async=function(r,e,t,c,s){s===void 0&&(s=Promise);var m=new F(E(r,e,t,c),s);return o.isGeneratorFunction(e)?m:m.next().then(function(b){return b.done?b.value:m.next()})};function Z(r,e,t){var c=x;return function(m,b){if(c===O)throw new Error("Generator is already running");if(c===W){if(m==="throw")throw b;return J()}for(t.method=m,t.arg=b;;){var T=t.delegate;if(T){var N=$(T,t);if(N){if(N===k)continue;return N}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(c===x)throw c=W,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);c=O;var A=G(r,e,t);if(A.type==="normal"){if(c=t.done?W:S,A.arg===k)continue;return{value:A.arg,done:t.done}}else A.type==="throw"&&(c=W,t.method="throw",t.arg=A.arg)}}}function $(r,e){var t=e.method,c=r.iterator[t];if(c===g)return e.delegate=null,t==="throw"&&r.iterator.return&&(e.method="return",e.arg=g,$(r,e),e.method==="throw")||t!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),k;var s=G(c,r.iterator,e.arg);if(s.type==="throw")return e.method="throw",e.arg=s.arg,e.delegate=null,k;var m=s.arg;if(!m)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k;if(m.done)e[r.resultName]=m.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=g);else return m;return e.delegate=null,k}z(C),p(C,v,"Generator"),p(C,y,function(){return this}),p(C,"toString",function(){return"[object Generator]"});function M(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function H(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function V(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(M,this),this.reset(!0)}o.keys=function(r){var e=Object(r),t=[];for(var c in e)t.push(c);return t.reverse(),function s(){for(;t.length;){var m=t.pop();if(m in e)return s.value=m,s.done=!1,s}return s.done=!0,s}};function Y(r){if(r){var e=r[y];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var t=-1,c=function s(){for(;++t<r.length;)if(a.call(r,t))return s.value=r[t],s.done=!1,s;return s.value=g,s.done=!0,s};return c.next=c}}return{next:J}}o.values=Y;function J(){return{value:g,done:!0}}return V.prototype={constructor:V,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(H),!r)for(var e in this)e.charAt(0)==="t"&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(N,A){return m.type="throw",m.arg=r,e.next=N,A&&(e.method="next",e.arg=g),!!A}for(var c=this.tryEntries.length-1;c>=0;--c){var s=this.tryEntries[c],m=s.completion;if(s.tryLoc==="root")return t("end");if(s.tryLoc<=this.prev){var b=a.call(s,"catchLoc"),T=a.call(s,"finallyLoc");if(b&&T){if(this.prev<s.catchLoc)return t(s.catchLoc,!0);if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else if(b){if(this.prev<s.catchLoc)return t(s.catchLoc,!0)}else if(T){if(this.prev<s.finallyLoc)return t(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var c=this.tryEntries[t];if(c.tryLoc<=this.prev&&a.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var s=c;break}}s&&(r==="break"||r==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var m=s?s.completion:{};return m.type=r,m.arg=e,s?(this.method="next",this.next=s.finallyLoc,k):this.complete(m)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),k},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),H(t),k}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var c=t.completion;if(c.type==="throw"){var s=c.arg;H(t)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:Y(r),resultName:e,nextLoc:t},this.method==="next"&&(this.arg=g),k}},o})(u.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(Q)),Q.exports}var ee,Le;function ye(){return Le||(Le=1,ee=(u,n)=>`${u}-${n}-${Math.random().toString(16).slice(3,8)}`),ee}var re,Re;function Be(){if(Re)return re;Re=1;const u=ye();let n=0;return re=({id:o,action:i,payload:a={}})=>{let l=o;return typeof l>"u"&&(l=u("Job",n),n+=1),{id:l,action:i,payload:a}},re}var K={},Oe;function Ee(){if(Oe)return K;Oe=1;let u=!1;return K.logging=u,K.setLogging=n=>{u=n},K.log=(...n)=>u?console.log.apply(this,n):null,K}var te,ke;function Ve(){if(ke)return te;ke=1;const u=Be(),{log:n}=Ee(),o=ye();let i=0;return te=()=>{const a=o("Scheduler",i),l={},g={};let R=[];i+=1;const y=()=>R.length,d=()=>Object.keys(l).length,v=()=>{if(R.length!==0){const S=Object.keys(l);for(let O=0;O<S.length;O+=1)if(typeof g[S[O]]>"u"){R[0](l[S[O]]);break}}},p=(S,O)=>new Promise((W,k)=>{const L=u({action:S,payload:O});R.push(async _=>{R.shift(),g[_.id]=L;try{W(await _[S].apply(this,[...O,L.id]))}catch(I){k(I)}finally{delete g[_.id],v()}}),n(`[${a}]: Add ${L.id} to JobQueue`),n(`[${a}]: JobQueue length=${R.length}`),v()});return{addWorker:S=>(l[S.id]=S,n(`[${a}]: Add ${S.id}`),n(`[${a}]: Number of workers=${d()}`),v(),S.id),addJob:async(S,...O)=>{if(d()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return p(S,O)},terminate:async()=>{Object.keys(l).forEach(async S=>{await l[S].terminate()}),R=[]},getQueueLen:y,getNumWorkers:d}},te}function Ye(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oe,be;function Ke(){return be||(be=1,oe=u=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof Ye=="function"&&(n.type="node"),typeof u>"u"?n:n[u]}),oe}var ne,Te;function Je(){if(Te)return ne;Te=1;const n=Ke()("type")==="browser"?o=>new URL(o,window.location.href).href:o=>o;return ne=o=>{const i={...o};return["corePath","workerPath","langPath"].forEach(a=>{o[a]&&(i[a]=n(i[a]))}),i},ne}var ae,Ae;function Fe(){return Ae||(Ae=1,ae={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ae}const Ze="6.0.1",Xe={version:Ze};var ie,_e;function Qe(){return _e||(_e=1,ie={workerBlobURL:!0,logger:()=>{}}),ie}var se,Ne;function er(){if(Ne)return se;Ne=1;const u=Xe.version;return se={...Qe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${u}/dist/worker.min.js`},se}var ce,Ie;function rr(){return Ie||(Ie=1,ce=({workerPath:u,workerBlobURL:n})=>{let o;if(Blob&&URL&&n){const i=new Blob([`importScripts("${u}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(i))}else o=new Worker(u);return o}),ce}var ue,Me;function tr(){return Me||(Me=1,ue=u=>{u.terminate()}),ue}var le,qe;function or(){return qe||(qe=1,le=(u,n)=>{u.onmessage=({data:o})=>{n(o)}}),le}var de,Pe;function nr(){return Pe||(Pe=1,de=async(u,n)=>{u.postMessage(n)}),de}var fe,Ce;function ar(){if(Ce)return fe;Ce=1;const u=o=>new Promise((i,a)=>{const l=new FileReader;l.onload=()=>{i(l.result)},l.onerror=({target:{error:{code:g}}})=>{a(Error(`File could not be read! Code=${g}`))},l.readAsArrayBuffer(o)}),n=async o=>{let i=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?i=atob(o.split(",")[1]).split("").map(a=>a.charCodeAt(0)):i=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(i=await n(o.src)),o.tagName==="VIDEO"&&(i=await n(o.poster)),o.tagName==="CANVAS"&&await new Promise(a=>{o.toBlob(async l=>{i=await u(l),a()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const a=await o.convertToBlob();i=await u(a)}else(o instanceof File||o instanceof Blob)&&(i=await u(o));return new Uint8Array(i)};return fe=n,fe}var he,$e;function ir(){if($e)return he;$e=1;const u=er(),n=rr(),o=tr(),i=or(),a=nr(),l=ar();return he={defaultOptions:u,spawnWorker:n,terminateWorker:o,onMessage:i,send:a,loadImage:l},he}var pe,De;function xe(){if(De)return pe;De=1;const u=Je(),n=Be(),{log:o}=Ee(),i=ye(),a=Fe(),{defaultOptions:l,spawnWorker:g,terminateWorker:R,onMessage:y,loadImage:d,send:v}=ir();let p=0;return pe=async(E="eng",G=a.LSTM_ONLY,x={},S={})=>{const O=i("Worker",p),{logger:W,errorHandler:k,...L}=u({...l,...x}),_={},I=typeof E=="string"?E.split("+"):E;let j=G,B=S;const U=[a.DEFAULT,a.LSTM_ONLY].includes(G)&&!L.legacyCore;let C,z;const F=new Promise((f,h)=>{z=f,C=h}),Z=f=>{C(f.message)};let $=g(L);$.onerror=Z,p+=1;const M=({id:f,action:h,payload:w})=>new Promise((q,P)=>{o(`[${O}]: Start ${f}, action=${h}`);const D=`${h}-${f}`;_[D]={resolve:q,reject:P},v($,{workerId:O,jobId:f,action:h,payload:w})}),H=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),V=f=>M(n({id:f,action:"load",payload:{options:{lstmOnly:U,corePath:L.corePath,logging:L.logging}}})),Y=(f,h,w)=>M(n({id:w,action:"FS",payload:{method:"writeFile",args:[f,h]}})),J=(f,h)=>M(n({id:h,action:"FS",payload:{method:"readFile",args:[f,{encoding:"utf8"}]}})),r=(f,h)=>M(n({id:h,action:"FS",payload:{method:"unlink",args:[f]}})),e=(f,h,w)=>M(n({id:w,action:"FS",payload:{method:f,args:h}})),t=(f,h)=>M(n({id:h,action:"loadLanguage",payload:{langs:f,options:{langPath:L.langPath,dataPath:L.dataPath,cachePath:L.cachePath,cacheMethod:L.cacheMethod,gzip:L.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(j)&&!L.legacyLang}}})),c=(f,h,w,q)=>M(n({id:q,action:"initialize",payload:{langs:f,oem:h,config:w}})),s=(f="eng",h,w,q)=>{if(U&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(h))throw Error("Legacy model requested but code missing.");const P=h||j;j=P;const D=w||B;B=D;const X=(typeof f=="string"?f.split("+"):f).filter(ze=>!I.includes(ze));return I.push(...X),X.length>0?t(X,q).then(()=>c(f,P,D,q)):c(f,P,D,q)},m=(f={},h)=>M(n({id:h,action:"setParameters",payload:{params:f}})),b=async(f,h={},w={text:!0},q)=>M(n({id:q,action:"recognize",payload:{image:await d(f),options:h,output:w}})),T=async(f,h)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return M(n({id:h,action:"detect",payload:{image:await d(f)}}))},N=async()=>($!==null&&(R($),$=null),Promise.resolve());y($,({workerId:f,jobId:h,status:w,action:q,data:P})=>{const D=`${q}-${h}`;if(w==="resolve")o(`[${f}]: Complete ${h}`),_[D].resolve({jobId:h,data:P}),delete _[D];else if(w==="reject")if(_[D].reject(P),delete _[D],q==="load"&&C(P),k)k(P);else throw Error(P);else w==="progress"&&W({...P,userJobId:h})});const A={id:O,worker:$,load:H,writeText:Y,readText:J,removeFile:r,FS:e,reinitialize:s,setParameters:m,recognize:b,detect:T,terminate:N};return V().then(()=>t(E)).then(()=>c(E,G,S)).then(()=>z(A)).catch(()=>{}),F},pe}var ge,Ge;function sr(){if(Ge)return ge;Ge=1;const u=xe();return ge={recognize:async(i,a,l)=>{const g=await u(a,1,l);return g.recognize(i).finally(async()=>{await g.terminate()})},detect:async(i,a)=>{const l=await u("osd",0,a);return l.detect(i).finally(async()=>{await l.terminate()})}},ge}var ve,We;function cr(){return We||(We=1,ve={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ve}var me,Ue;function ur(){return Ue||(Ue=1,me={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),me}var we,je;function lr(){if(je)return we;je=1,He();const u=Ve(),n=xe(),o=sr(),i=cr(),a=Fe(),l=ur(),{setLogging:g}=Ee();return we={languages:i,OEM:a,PSM:l,createScheduler:u,createWorker:n,setLogging:g,...o},we}var dr=lr();class fr{constructor(){this.worker=null,this.nomesAceitos=["gustavo santos ribeiro","gustavo s ribeiro","gustavo ribeiro","gustavo santos","gustavo s. ribeiro"],this.chavePix="12996764694",this.valorMinimo=10,this.toleranciaMinutos=5,this.toleranciaSegundos=this.toleranciaMinutos*60}async inicializarWorker(){return this.worker||(this.worker=await dr.createWorker("por"),await this.worker.setParameters({tessedit_char_whitelist:"0123456789R$:.,/abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ√°√©√≠√≥√∫√¢√™√Æ√¥√ª√£√µ√ß√Å√â√ç√ì√ö√Ç√ä√é√î√õ√É√ï√á -",tessedit_pageseg_mode:"6",preserve_interword_spaces:"1"})),this.worker}async processarArquivo(n){console.log("üîç INICIANDO VALIDA√á√ÉO EXATA:",new Date().toISOString());try{const o=await this.inicializarWorker(),{data:{text:i}}=await o.recognize(n);console.log("üìù Texto extra√≠do:",i.substring(0,300));const a=this.analisarTextoExato(i);console.log("üìã Resultado an√°lise:",a);const l=this.validarTemporalmenteExato(a.dataHora,a.hora);return console.log("‚è∞ Valida√ß√£o temporal:",l),l.valido?this.validarValorExato(a.valor)?this.validarNomeExato(a.nomeEncontrado)?a.confirmacao?{valido:!0,mensagem:"‚úÖ Pagamento validado com sucesso!",dados:a,tempoRestante:l.tempoRestante}:{valido:!1,mensagem:"‚ùå Confirma√ß√£o de PIX n√£o encontrada.",dados:a}:{valido:!1,mensagem:"‚ùå Nome do favorecido n√£o corresponde.",dados:a}:{valido:!1,mensagem:"‚ùå Valor insuficiente. M√≠nimo R$ 10,00.",dados:a}:{valido:!1,mensagem:`‚ùå ${l.mensagem}`,motivo:"TEMPO_EXCEDIDO",dados:a}}catch(o){return console.error("‚ùå Erro:",o),{valido:!1,mensagem:"‚ùå Erro ao processar imagem.",dados:null}}}analisarTextoExato(n){const o=n.toLowerCase();console.log("üîç Analisando texto para regras exatas...");const i={valor:null,data:null,hora:null,dataHora:null,nomeEncontrado:!1,confirmacao:!1,textoEncontrado:[]},a=[/r\s*\$\s*(\d+[.,]\d{2})/gi,/r\$\s*(\d+[.,]\d{2})/gi,/valor\s*[.:]?\s*(\d+[.,]\d{2})/gi,/total\s*[.:]?\s*(\d+[.,]\d{2})/gi,/pago\s*[.:]?\s*(\d+[.,]\d{2})/gi,/(\d+[.,]\d{2})\s*reais/gi];for(const y of a){const d=[...o.matchAll(y)];for(const v of d){let p=v[1]||v[0];p=p.replace(/r\s*\$\s*/gi,"");const E=parseFloat(p.replace(",","."));if(!isNaN(E)){i.valor=E,i.textoEncontrado.push(`Valor: R$ ${E.toFixed(2)}`);break}}if(i.valor)break}const l=[/(\d{2})[./-](\d{2})[./-](\d{4})/g,/(\d{2})[./-](\d{2})[./-](\d{2})/g,/(\d{4})[./-](\d{2})[./-](\d{2})/g];for(const y of l){const d=o.match(y);if(d){let v,p,E;if(d[3]&&d[3].length===4?(v=d[1],p=d[2],E=d[3]):d[3]&&d[3].length===2?(v=d[1],p=d[2],E="20"+d[3]):d[1]&&d[1].length===4&&(E=d[1],p=d[2],v=d[3]),v&&p&&E){i.data=`${E}-${p}-${v}`,i.textoEncontrado.push(`Data: ${v}/${p}/${E}`);break}}}const g=[/(\d{1,2})[:.](\d{2})(?:[:.](\d{2}))?/g,/(\d{1,2})[h]\s*(\d{1,2})/gi];for(const y of g){const d=o.match(y);if(d){let v,p;if(d[1]&&d[2]&&!d[1].includes("h")?(v=d[1].padStart(2,"0"),p=d[2].padStart(2,"0")):d[1]&&d[2]&&d[1].includes("h")&&(v=d[1].replace("h","").padStart(2,"0"),p=d[2].padStart(2,"0")),v&&p){i.hora=`${v}:${p}`,i.textoEncontrado.push(`Hora: ${v}:${p}`),i.data&&(i.dataHora=`${i.data}T${v}:${p}:00`);break}}}for(const y of this.nomesAceitos)if(o.includes(y)){i.nomeEncontrado=!0,i.textoEncontrado.push(`Nome: ${y.toUpperCase()}`);break}const R=["pix realizado","pix enviado","pix efetuado","pix conclu√≠do","transfer√™ncia realizada","pagamento realizado","confirma√ß√£o de pagamento","comprovante de pagamento"];for(const y of R)if(o.includes(y)){i.confirmacao=!0,i.textoEncontrado.push("Confirma√ß√£o: OK");break}return i}validarValorExato(n){return n?n>=this.valorMinimo:!1}validarNomeExato(n){return n===!0}validarTemporalmenteExato(n,o){if(console.log("‚è∞ Validando tempo exato..."),console.log("üìÖ DataHora do comprovante:",n),console.log("üïí Hora do comprovante:",o),console.log("üïí Agora:",new Date().toISOString()),!n&&!o)return{valido:!1,mensagem:"Data/hora n√£o encontrada no comprovante."};try{let i;const a=new Date;if(n)i=new Date(n);else if(o){const v=a.toISOString().split("T")[0];i=new Date(`${v}T${o}:00`)}else return{valido:!1,mensagem:"Formato de data/hora inv√°lido."};if(isNaN(i.getTime()))return{valido:!1,mensagem:"Data/hora inv√°lida no comprovante."};const l=a-i,g=Math.floor(l/1e3),R=Math.floor(g/60);if(console.log(`‚è±Ô∏è Diferen√ßa calculada: ${g} segundos (${R} minutos)`),g<0)return{valido:!1,mensagem:"Hora do comprovante est√° no futuro. Verifique o rel√≥gio do dispositivo."};if(g>this.toleranciaSegundos){const v=g-this.toleranciaSegundos;return{valido:!1,mensagem:`Comprovante expirado h√° ${Math.ceil(v/60)} minuto(s). Fa√ßa um NOVO pagamento.`,tempoExcedido:v}}const y=this.toleranciaSegundos-g,d=Math.floor(y/60);return{valido:!0,mensagem:`Dentro do prazo (${d} min restantes)`,tempoRestante:d,segundosRestantes:y}}catch(i){return console.error("‚ùå Erro valida√ß√£o temporal:",i),{valido:!1,mensagem:"Erro ao validar data/hora."}}}async terminar(){this.worker&&(await this.worker.terminate(),this.worker=null)}}const pr=new fr;export{pr as default};
