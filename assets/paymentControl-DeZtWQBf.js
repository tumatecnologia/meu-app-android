var Q={exports:{}},Oe;function Ye(){return Oe||(Oe=1,(function(l){var a=(function(t){var c=Object.prototype,n=c.hasOwnProperty,i=Object.defineProperty||function(r,e,o){r[e]=o.value},h,g=typeof Symbol=="function"?Symbol:{},w=g.iterator||"@@iterator",k=g.asyncIterator||"@@asyncIterator",_=g.toStringTag||"@@toStringTag";function T(r,e,o){return Object.defineProperty(r,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{T({},"")}catch{T=function(e,o,u){return e[o]=u}}function $(r,e,o,u){var s=e&&e.prototype instanceof y?e:y,p=Object.create(s.prototype),S=new V(u||[]);return i(p,"_invoke",{value:Z(r,o,S)}),p}t.wrap=$;function G(r,e,o){try{return{type:"normal",arg:r.call(e,o)}}catch(u){return{type:"throw",arg:u}}}var B="suspendedStart",v="suspendedYield",E="executing",W="completed",O={};function y(){}function A(){}function M(){}var F={};T(F,w,function(){return this});var j=Object.getPrototypeOf,U=j&&j(j(J([])));U&&U!==c&&n.call(U,w)&&(F=U);var q=M.prototype=y.prototype=Object.create(F);A.prototype=M,i(q,"constructor",{value:M,configurable:!0}),i(M,"constructor",{value:A,configurable:!0}),A.displayName=T(M,_,"GeneratorFunction");function H(r){["next","throw","return"].forEach(function(e){T(r,e,function(o){return this._invoke(e,o)})})}t.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===A||(e.displayName||e.name)==="GeneratorFunction":!1},t.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,M):(r.__proto__=M,T(r,_,"GeneratorFunction")),r.prototype=Object.create(q),r},t.awrap=function(r){return{__await:r}};function z(r,e){function o(p,S,L,b){var R=G(r[p],r,S);if(R.type==="throw")b(R.arg);else{var d=R.arg,f=d.value;return f&&typeof f=="object"&&n.call(f,"__await")?e.resolve(f.__await).then(function(m){o("next",m,L,b)},function(m){o("throw",m,L,b)}):e.resolve(f).then(function(m){d.value=m,L(d)},function(m){return o("throw",m,L,b)})}}var u;function s(p,S){function L(){return new e(function(b,R){o(p,S,b,R)})}return u=u?u.then(L,L):L()}i(this,"_invoke",{value:s})}H(z.prototype),T(z.prototype,k,function(){return this}),t.AsyncIterator=z,t.async=function(r,e,o,u,s){s===void 0&&(s=Promise);var p=new z($(r,e,o,u),s);return t.isGeneratorFunction(e)?p:p.next().then(function(S){return S.done?S.value:p.next()})};function Z(r,e,o){var u=B;return function(p,S){if(u===E)throw new Error("Generator is already running");if(u===W){if(p==="throw")throw S;return x()}for(o.method=p,o.arg=S;;){var L=o.delegate;if(L){var b=C(L,o);if(b){if(b===O)continue;return b}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(u===B)throw u=W,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);u=E;var R=G(r,e,o);if(R.type==="normal"){if(u=o.done?W:v,R.arg===O)continue;return{value:R.arg,done:o.done}}else R.type==="throw"&&(u=W,o.method="throw",o.arg=R.arg)}}}function C(r,e){var o=e.method,u=r.iterator[o];if(u===h)return e.delegate=null,o==="throw"&&r.iterator.return&&(e.method="return",e.arg=h,C(r,e),e.method==="throw")||o!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),O;var s=G(u,r.iterator,e.arg);if(s.type==="throw")return e.method="throw",e.arg=s.arg,e.delegate=null,O;var p=s.arg;if(!p)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O;if(p.done)e[r.resultName]=p.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=h);else return p;return e.delegate=null,O}H(q),T(q,_,"Generator"),T(q,w,function(){return this}),T(q,"toString",function(){return"[object Generator]"});function I(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function Y(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function V(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(I,this),this.reset(!0)}t.keys=function(r){var e=Object(r),o=[];for(var u in e)o.push(u);return o.reverse(),function s(){for(;o.length;){var p=o.pop();if(p in e)return s.value=p,s.done=!1,s}return s.done=!0,s}};function J(r){if(r){var e=r[w];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var o=-1,u=function s(){for(;++o<r.length;)if(n.call(r,o))return s.value=r[o],s.done=!1,s;return s.value=h,s.done=!0,s};return u.next=u}}return{next:x}}t.values=J;function x(){return{value:h,done:!0}}return V.prototype={constructor:V,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(Y),!r)for(var e in this)e.charAt(0)==="t"&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=h)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function o(b,R){return p.type="throw",p.arg=r,e.next=b,R&&(e.method="next",e.arg=h),!!R}for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u],p=s.completion;if(s.tryLoc==="root")return o("end");if(s.tryLoc<=this.prev){var S=n.call(s,"catchLoc"),L=n.call(s,"finallyLoc");if(S&&L){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(S){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else if(L){if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o];if(u.tryLoc<=this.prev&&n.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var s=u;break}}s&&(r==="break"||r==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var p=s?s.completion:{};return p.type=r,p.arg=e,s?(this.method="next",this.next=s.finallyLoc,O):this.complete(p)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),O},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===r)return this.complete(o.completion,o.afterLoc),Y(o),O}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===r){var u=o.completion;if(u.type==="throw"){var s=u.arg;Y(o)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,o){return this.delegate={iterator:J(r),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=h),O}},t})(l.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}})(Q)),Q.exports}var ee,Se;function ye(){return Se||(Se=1,ee=(l,a)=>`${l}-${a}-${Math.random().toString(16).slice(3,8)}`),ee}var re,Le;function je(){if(Le)return re;Le=1;const l=ye();let a=0;return re=({id:t,action:c,payload:n={}})=>{let i=t;return typeof i>"u"&&(i=l("Job",a),a+=1),{id:i,action:c,payload:n}},re}var K={},Re;function Ee(){if(Re)return K;Re=1;let l=!1;return K.logging=l,K.setLogging=a=>{l=a},K.log=(...a)=>l?console.log.apply(this,a):null,K}var te,Te;function Ve(){if(Te)return te;Te=1;const l=je(),{log:a}=Ee(),t=ye();let c=0;return te=()=>{const n=t("Scheduler",c),i={},h={};let g=[];c+=1;const w=()=>g.length,k=()=>Object.keys(i).length,_=()=>{if(g.length!==0){const v=Object.keys(i);for(let E=0;E<v.length;E+=1)if(typeof h[v[E]]>"u"){g[0](i[v[E]]);break}}},T=(v,E)=>new Promise((W,O)=>{const y=l({action:v,payload:E});g.push(async A=>{g.shift(),h[A.id]=y;try{W(await A[v].apply(this,[...E,y.id]))}catch(M){O(M)}finally{delete h[A.id],_()}}),a(`[${n}]: Add ${y.id} to JobQueue`),a(`[${n}]: JobQueue length=${g.length}`),_()});return{addWorker:v=>(i[v.id]=v,a(`[${n}]: Add ${v.id}`),a(`[${n}]: Number of workers=${k()}`),_(),v.id),addJob:async(v,...E)=>{if(k()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return T(v,E)},terminate:async()=>{Object.keys(i).forEach(async v=>{await i[v].terminate()}),g=[]},getQueueLen:w,getNumWorkers:k}},te}function Je(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oe,ke;function Ke(){return ke||(ke=1,oe=l=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":typeof document=="object"?a.type="browser":typeof process=="object"&&typeof Je=="function"&&(a.type="node"),typeof l>"u"?a:a[l]}),oe}var ne,Ae;function xe(){if(Ae)return ne;Ae=1;const a=Ke()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return ne=t=>{const c={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(c[n]=a(c[n]))}),c},ne}var ae,be;function ze(){return be||(be=1,ae={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ae}const Ze="6.0.1",Xe={version:Ze};var ie,_e;function Qe(){return _e||(_e=1,ie={workerBlobURL:!0,logger:()=>{}}),ie}var se,Me;function er(){if(Me)return se;Me=1;const l=Xe.version;return se={...Qe(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${l}/dist/worker.min.js`},se}var ce,Ie;function rr(){return Ie||(Ie=1,ce=({workerPath:l,workerBlobURL:a})=>{let t;if(Blob&&URL&&a){const c=new Blob([`importScripts("${l}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(c))}else t=new Worker(l);return t}),ce}var ue,Ne;function tr(){return Ne||(Ne=1,ue=l=>{l.terminate()}),ue}var le,Pe;function or(){return Pe||(Pe=1,le=(l,a)=>{l.onmessage=({data:t})=>{a(t)}}),le}var de,qe;function nr(){return qe||(qe=1,de=async(l,a)=>{l.postMessage(a)}),de}var fe,Ce;function ar(){if(Ce)return fe;Ce=1;const l=t=>new Promise((c,n)=>{const i=new FileReader;i.onload=()=>{c(i.result)},i.onerror=({target:{error:{code:h}}})=>{n(Error(`File could not be read! Code=${h}`))},i.readAsArrayBuffer(t)}),a=async t=>{let c=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?c=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):c=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(c=await a(t.src)),t.tagName==="VIDEO"&&(c=await a(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async i=>{c=await l(i),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();c=await l(n)}else(t instanceof File||t instanceof Blob)&&(c=await l(t));return new Uint8Array(c)};return fe=a,fe}var he,De;function ir(){if(De)return he;De=1;const l=er(),a=rr(),t=tr(),c=or(),n=nr(),i=ar();return he={defaultOptions:l,spawnWorker:a,terminateWorker:t,onMessage:c,send:n,loadImage:i},he}var pe,$e;function Be(){if($e)return pe;$e=1;const l=xe(),a=je(),{log:t}=Ee(),c=ye(),n=ze(),{defaultOptions:i,spawnWorker:h,terminateWorker:g,onMessage:w,loadImage:k,send:_}=ir();let T=0;return pe=async($="eng",G=n.LSTM_ONLY,B={},v={})=>{const E=c("Worker",T),{logger:W,errorHandler:O,...y}=l({...i,...B}),A={},M=typeof $=="string"?$.split("+"):$;let F=G,j=v;const U=[n.DEFAULT,n.LSTM_ONLY].includes(G)&&!y.legacyCore;let q,H;const z=new Promise((d,f)=>{H=d,q=f}),Z=d=>{q(d.message)};let C=h(y);C.onerror=Z,T+=1;const I=({id:d,action:f,payload:m})=>new Promise((N,P)=>{t(`[${E}]: Start ${d}, action=${f}`);const D=`${f}-${d}`;A[D]={resolve:N,reject:P},_(C,{workerId:E,jobId:d,action:f,payload:m})}),Y=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),V=d=>I(a({id:d,action:"load",payload:{options:{lstmOnly:U,corePath:y.corePath,logging:y.logging}}})),J=(d,f,m)=>I(a({id:m,action:"FS",payload:{method:"writeFile",args:[d,f]}})),x=(d,f)=>I(a({id:f,action:"FS",payload:{method:"readFile",args:[d,{encoding:"utf8"}]}})),r=(d,f)=>I(a({id:f,action:"FS",payload:{method:"unlink",args:[d]}})),e=(d,f,m)=>I(a({id:m,action:"FS",payload:{method:d,args:f}})),o=(d,f)=>I(a({id:f,action:"loadLanguage",payload:{langs:d,options:{langPath:y.langPath,dataPath:y.dataPath,cachePath:y.cachePath,cacheMethod:y.cacheMethod,gzip:y.gzip,lstmOnly:[n.DEFAULT,n.LSTM_ONLY].includes(F)&&!y.legacyLang}}})),u=(d,f,m,N)=>I(a({id:N,action:"initialize",payload:{langs:d,oem:f,config:m}})),s=(d="eng",f,m,N)=>{if(U&&[n.TESSERACT_ONLY,n.TESSERACT_LSTM_COMBINED].includes(f))throw Error("Legacy model requested but code missing.");const P=f||F;F=P;const D=m||j;j=D;const X=(typeof d=="string"?d.split("+"):d).filter(He=>!M.includes(He));return M.push(...X),X.length>0?o(X,N).then(()=>u(d,P,D,N)):u(d,P,D,N)},p=(d={},f)=>I(a({id:f,action:"setParameters",payload:{params:d}})),S=async(d,f={},m={text:!0},N)=>I(a({id:N,action:"recognize",payload:{image:await k(d),options:f,output:m}})),L=async(d,f)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return I(a({id:f,action:"detect",payload:{image:await k(d)}}))},b=async()=>(C!==null&&(g(C),C=null),Promise.resolve());w(C,({workerId:d,jobId:f,status:m,action:N,data:P})=>{const D=`${N}-${f}`;if(m==="resolve")t(`[${d}]: Complete ${f}`),A[D].resolve({jobId:f,data:P}),delete A[D];else if(m==="reject")if(A[D].reject(P),delete A[D],N==="load"&&q(P),O)O(P);else throw Error(P);else m==="progress"&&W({...P,userJobId:f})});const R={id:E,worker:C,load:Y,writeText:J,readText:x,removeFile:r,FS:e,reinitialize:s,setParameters:p,recognize:S,detect:L,terminate:b};return V().then(()=>o($)).then(()=>u($,G,v)).then(()=>H(R)).catch(()=>{}),z},pe}var ge,Ge;function sr(){if(Ge)return ge;Ge=1;const l=Be();return ge={recognize:async(c,n,i)=>{const h=await l(n,1,i);return h.recognize(c).finally(async()=>{await h.terminate()})},detect:async(c,n)=>{const i=await l("osd",0,n);return i.detect(c).finally(async()=>{await i.terminate()})}},ge}var me,We;function cr(){return We||(We=1,me={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),me}var ve,Ue;function ur(){return Ue||(Ue=1,ve={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),ve}var we,Fe;function lr(){if(Fe)return we;Fe=1,Ye();const l=Ve(),a=Be(),t=sr(),c=cr(),n=ze(),i=ur(),{setLogging:h}=Ee();return we={languages:c,OEM:n,PSM:i,createScheduler:l,createWorker:a,setLogging:h,...t},we}var dr=lr();class fr{constructor(){this.worker=null,this.nomeBeneficiario="Gustavo Santos Ribeiro",this.chavePix="12996764694",this.valorMinimo=10,this.toleranciaMinutos=5,this.toleranciaSegundos=this.toleranciaMinutos*60}async inicializarWorker(){return this.worker||(this.worker=await dr.createWorker("por"),await this.worker.setParameters({tessedit_char_whitelist:"0123456789R$:.,/abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ√°√©√≠√≥√∫√¢√™√Æ√¥√ª√£√µ√ß√Å√â√ç√ì√ö√Ç√ä√é√î√õ√É√ï√á -",tessedit_pageseg_mode:"6",preserve_interword_spaces:"1"})),this.worker}async processarArquivo(a){try{console.log("üîç Iniciando processamento do arquivo:",a.name,"√†s",new Date().toISOString());const t=await this.inicializarWorker(),{data:{text:c}}=await t.recognize(a);console.log("üìù Texto extra√≠do:",c.substring(0,200)+"...");const n=this.analisarTexto(c),i=this.validarTemporalmenteRigorosa(n.dataHora);return i.valido?n.valido?{valido:!0,mensagem:"‚úÖ Pagamento validado com sucesso!",dados:n,tempoRestante:i.tempoRestante,validadoAs:new Date().toISOString()}:{valido:!1,mensagem:"‚ùå Dados incompletos no comprovante.",dados:n}:(console.log("‚è∞ COMPROVANTE REJEITADO POR TEMPO:",i.mensagem),{valido:!1,mensagem:`‚ùå ${i.mensagem}`,motivo:"TEMPO_EXCEDIDO",dados:n,tempoExcedido:i.tempoExcedido})}catch(t){return console.error("‚ùå Erro no processamento:",t),{valido:!1,mensagem:"‚ùå Erro ao processar imagem. Tente novamente.",dados:null}}}analisarTexto(a){const t=a.toLowerCase(),c={valor:[/r\$\s*(\d+[.,]\d{2})/gi,/(\d+[.,]\d{2})\s*reais/gi,/valor.*?(\d+[.,]\d{2})/gi,/total.*?(\d+[.,]\d{2})/gi,/(\d+[.,]\d{2})/g],dataHora:[/(\d{2}[./-]\d{2}[./-]\d{4}\s+\d{2}[:.]\d{2}(?:[:.]\d{2})?)/g,/(\d{2}[:.]\d{2}(?:[:.]\d{2})?\s+\d{2}[./-]\d{2}[./-]\d{4})/g,/(\d{2}[./-]\d{2}[./-]\d{4})/g,/(\d{2}[:.]\d{2})/g],confirmacao:[/pix\s+(?:realizado|enviado|conclu√≠do|efetuado)/gi,/transfer√™ncia\s+(?:realizada|conclu√≠da)/gi,/pagamento\s+(?:realizado|conclu√≠do|efetuado)/gi,/(?:confirma√ß√£o|comprovante)\s+de\s+pagamento/gi,/(?:sucesso|confirmado|aprovado)/gi]},n={valor:null,dataHora:null,confirmacao:!1,textoEncontrado:[]};for(const i of c.valor){const h=[...t.matchAll(i)];for(const g of h){let w=parseFloat(g[1].replace(",","."));if(!isNaN(w)&&w>=this.valorMinimo){n.valor=w,n.textoEncontrado.push(`Valor: R$ ${w.toFixed(2)}`);break}}if(n.valor)break}for(const i of c.dataHora){const h=t.match(i);if(h){n.dataHora=this.normalizarDataHora(h[0]),n.textoEncontrado.push(`Data/Hora: ${n.dataHora}`);break}}for(const i of c.confirmacao)if(i.test(t)){n.confirmacao=!0,n.textoEncontrado.push("Confirma√ß√£o encontrada");break}return n.valido=n.valor!==null&&n.confirmacao&&n.dataHora!==null,console.log("üìã Resultado an√°lise:",n),n}normalizarDataHora(a){try{const t=a.match(/(\d{2})[./-](\d{2})[./-](\d{4})/),c=a.match(/(\d{2})[:.](\d{2})/);if(t&&c){const[n,i,h,g]=t,[w,k,_]=c;return`${g}-${h}-${i}T${k.padStart(2,"0")}:${_.padStart(2,"0")}:00`}else if(t){const[n,i,h,g]=t;return`${g}-${h}-${i}T12:00:00`}else if(c){const i=new Date().toISOString().split("T")[0],[h,g,w]=c;return`${i}T${g.padStart(2,"0")}:${w.padStart(2,"0")}:00`}return a}catch(t){return console.log("‚ö†Ô∏è Erro normaliza√ß√£o data:",t),null}}validarTemporalmenteRigorosa(a){if(console.log("‚è∞ VALIDA√á√ÉO TEMPORAL R√çGIDA INICIADA"),console.log("üìÖ Data/hora do comprovante:",a),console.log("üïí Agora:",new Date().toISOString()),!a)return{valido:!1,mensagem:"Data/hora n√£o encontrada no comprovante. Fa√ßa um NOVO pagamento e envie IMEDIATAMENTE.",tempoExcedido:null};try{const t=new Date(a),c=new Date;if(isNaN(t.getTime()))return{valido:!1,mensagem:"Data/hora inv√°lida no comprovante. Fa√ßa um NOVO pagamento.",tempoExcedido:null};const n=c-t,i=Math.floor(n/1e3),h=Math.floor(i/60);if(console.log(`‚è±Ô∏è Diferen√ßa: ${i} segundos (${h} minutos)`),console.log(`üìè Limite: ${this.toleranciaSegundos} segundos (${this.toleranciaMinutos} minutos)`),i>this.toleranciaSegundos){const k=i-this.toleranciaSegundos,_=Math.ceil(k/60);return console.log(`üö® COMPROVANTE EXCEDIDO: ${k} segundos a mais!`),{valido:!1,mensagem:`COMPROVANTE EXPIRADO! Feito h√° ${h} minutos. Fa√ßa um NOVO PAGAMENTO AGORA.`,tempoExcedido:k,detalhes:`Excedido por ${_} minuto(s)`}}const g=this.toleranciaSegundos-i,w=Math.floor(g/60);return console.log(`‚úÖ DENTRO DO PRAZO: ${g} segundos restantes`),{valido:!0,mensagem:`Comprovante dentro do prazo (${w} minutos restantes)`,tempoRestante:w,segundosRestantes:g}}catch(t){return console.error("‚ùå Erro valida√ß√£o temporal:",t),{valido:!1,mensagem:"Erro ao validar data/hora. Fa√ßa um NOVO pagamento.",tempoExcedido:null}}}async terminar(){this.worker&&(await this.worker.terminate(),this.worker=null)}}const pr=new fr;export{pr as default};
